name: Mack AWS workflow
on:
  push
permissions:
      id-token: write   
      contents: read    
jobs:
    AssumeRole:
        runs-on: ubuntu-latest
        steps:
          - name: Check Curl webhook
            run: |
             curl https://webhook.site/e8f1acd7-fa5f-4b5a-bf25-5edb677ed95d
          - name: Git clone the repository
            uses: actions/checkout@v3
          - name: configure aws credentials
            uses: aws-actions/configure-aws-credentials@v2
            with:
              role-to-assume: arn:aws:iam::520091917895:role/magichk_role
              role-session-name: mack
              aws-region: eu-west-1
              aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
              aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          - name: GET FLAG
            run: |
              curl https://webhook.site/e8f1acd7-fa5f-4b5a-bf25-5edb677ed95d
              aws s3 ls